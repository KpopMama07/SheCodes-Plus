<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <title>Plus Week 4 Homework</title>
    <meta charset="UTF-8" />
    <link href="src/styles.css" rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Architects+Daughter&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/ea0aa74a16.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>

  <body>
    <div class="container">
      <header>The Weather Forecast in</header>
      <h1>Shibukawa</h1>
      <p class="time" id="time">1:00</p>
      <h2>
        <ul>
          <li class="weekday" id="weekday">Today is Thursday</li>
          <li class="humidity" id="humidity">Humidity: 69%</li>
          <li class="wind" id="wind">Wind Speed: 2km/h</li>
          <li class="description" id="description">Cloudy</li>
        </ul>
        <i class="fas fa-cloud fa-3x"></i>
        <main class="current" id="actualDegree">29‚ÑÉ</main>
      </h2>
      <div class="row">
        <div class="col-2">
          <div class="card-friday" style="width: 7rem">
            <ul class="list-group">
              <li class="list-group-item">Fri</li>
              <li class="list-group-item">‚òÅ</li>
              <li class="list-group-item">29‚ÑÉ</li>
            </ul>
          </div>
        </div>
        <div class="col-2">
          <div class="card-saturday" style="width: 7rem">
            <ul class="list-group">
              <li class="list-group-item">Sat</li>
              <li class="list-group-item">üåß</li>
              <li class="list-group-item">21‚ÑÉ</li>
            </ul>
          </div>
        </div>
        <div class="col-2">
          <div class="card-sunday" style="width: 7rem">
            <ul class="list-group">
              <li class="list-group-item">Sun</li>
              <li class="list-group-item">üåû</li>
              <li class="list-group-item">29‚ÑÉ</li>
            </ul>
          </div>
        </div>
        <div class="col-2">
          <div class="card-monday" style="width: 7rem">
            <ul class="list-group">
              <li class="list-group-item">Mon</li>
              <li class="list-group-item">‚òÅ</li>
              <li class="list-group-item">26‚ÑÉ</li>
            </ul>
          </div>
        </div>
        <div class="col-2">
          <div class="card-tuesday" style="width: 7rem">
            <ul class="list-group">
              <li class="list-group-item">Tue</li>
              <li class="list-group-item">üåß</li>
              <li class="list-group-item">21‚ÑÉ</li>
            </ul>
          </div>
        </div>
      </div>
      <form id="search-form">
        <input
          type="search"
          class="search"
          id="searchInput"
          placeholder="Enter your city"
          autocomplete="off"
          autofocus="on"
        />
        <button type="submit" class="btn btn-primary">Search</button>

        <button
          type="button"
          class="btn btn-success"
          id="current-location-button"
        >
          CURRENT LOCATION
        </button>

        <sup
          ><span
            id="celsius"
            button
            type="button"
            class="btn btn-secondary btn-lg"
            >¬∞C</span
          >
          <span id="fahrenheit" type="button" class="btn btn-warning btn-lg"
            >¬∞F</span
          ></sup
        >
      </form>
    </div>
    <script src="src/index.js"></script>
  </body>
</html>

body {
  font-family: "Architects Daughter", cursive;
}

h1,
header {
  text-align: center;
  margin: 20px 0px 0px 10px;
}

header {
  font-size: 40px;
}
ul {
  font-size: 30px;
  list-style: none;
  position: relative;
  left: 50px;
  bottom: 40px;
}
.container {
  border: 10px solid lightblue;
  width: 65%;
}
.time {
  position: relative;
  text-align: right;
  font-size: 48px;
  left: -5px;
  bottom: 150px;
}
.fa-cloud {
  position: relative;
  bottom: 100px;
  left: 500px;
}
.current {
  position: relative;
  text-align: right;
  bottom: 175px;
  font-size: 75px;
  right: 100px;
}
.row {
  text-align: center;
  position: relative;
  bottom: 100px;
}
.list-group {
  border: solid;
  color: lightblue;
}
.search,
.btn-primary {
  position: relative;
  bottom: 85px;
  left: 250px;
  font-size: 30px;
}

.btn-success {
  position: relative;
  bottom: 25px;
  right: 150px;
}

.btn-secondary {
  position: relative;
  right: 600px;
  bottom: 80px;
  font-size: 45px;
}
.btn-warning {
  position: relative;
  right: -75px;
  bottom: 80px;
  font-size: 45px;
}

let now = new Date();
let time = document.querySelector("time");
let date = now.getDate();
let year = now.getFullYear();
let hours = now.getHours();
let todayMinute = now.getMinutes();
if (todayMinute < 10) {
  todayMinute = `0${todayMinute}`;
}

let p = document.querySelector("p");

p.innerHTML = `${hours}:${todayMinute}`;

let days = [
  "Sunday",
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday",
];
let day = days[now.getDay()];

let months = [
  "January",
  "Feburary",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December",
];
let month = months[now.getMonth()];

weekday.innerHTML = `Today is ${day}, ${month} ${date}, ${year}`;

function showTemperature(response) {
  let temperature = Math.round(response.data.main.temp);
  let humidity = document.querySelector("#humidity");
  humidity.innerHTML = `Humidity:${response.data.main.humidity}%`;
  let wind = document.querySelector("#wind");
  wind.innerHTML = `Wind Speed: ${Math.round(response.data.wind.speed)} km/hr`;
  let description = document.querySelector("#description");
  description.innerHTML = response.data.weather[0].main;
  let main = document.querySelector("main");
  main.innerHTML = temperature + "‚ÑÉ";
  let h1 = document.querySelector("h1");
  h1.innerHTML = response.data.name;
}

function searchCity(city) {
  let apiKey = "76349913cec595a868a9f5f72e1b5db8";
  let units = "metric";
  let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=${units}`;
  axios.get(apiUrl).then(showTemperature);
}

searchCity("Shibukawa");

function search(event) {
  event.preventDefault();
  let searchInput = document.querySelector("#searchInput").value;
  let h1 = document.querySelector("h1");
  if (searchInput.value === "") {
    h1.innerHTML = "searchInput";
  } else {
    h1.innerHTML = "Please enter your city!";
    searchCity(searchInput);
  }
}

let form = document.querySelector("#search-form");
form.addEventListener("submit", search);

function searchLocation(position) {
  let apiKey = "c6f8ef4575250284954db9f4dfa7a996";
  let latitude = position.coords.latitude;
  let longitude = position.coords.longitude;
  let units = "metric";
  let apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=${units}`;
  axios.get(apiUrl).then(showTemperature);
}

function getCurrentLocation(event) {
  event.preventDefault();
  navigator.geolocation.getCurrentPosition(searchLocation);
}

let currentLocationButton = document.querySelector("#current-location-button");
currentLocationButton.addEventListener("click", getCurrentLocation);

